apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'
apply plugin: 'jacoco-android'
apply plugin: "androidx.navigation.safeargs"

android {
    def globalConfiguration = rootProject.extensions.getByName("ext")

    compileSdkVersion globalConfiguration["androidCompileSdkVersion"]
    buildToolsVersion globalConfiguration["androidBuildToolsVersion"]

    defaultConfig {
        applicationId "com.kutluoglu.demo.bigburger"
        minSdkVersion globalConfiguration["androidMinSdkVersion"]
        targetSdkVersion globalConfiguration["androidTargetSdkVersion"]
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    packagingOptions {
        exclude 'LICENSE.txt'
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/ASL2.0'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/LICENSE'
    }
    lintOptions {
        quiet true
        abortOnError false
        ignoreWarnings true
    }

    androidExtensions {
        experimental = true // At least Parcelize need this...
    }
}

kapt {
    correctErrorTypes = true
}

configurations.all {
    resolutionStrategy {
        force "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
    }
}

dependencies {

    implementation project(':presentation')
    implementation project(':domain')
    implementation project(':data')
    implementation project(':cache')
    implementation project(':remote')

    def mobileUiDependencies = rootProject.ext.mobileUiDependencies

    implementation mobileUiDependencies.javaxInject
    implementation mobileUiDependencies.javaxAnnotation

    implementation mobileUiDependencies.kotlin
    implementation mobileUiDependencies.rxKotlin
    implementation mobileUiDependencies.rxAndroid
    implementation mobileUiDependencies.xAppCompat
    implementation mobileUiDependencies.xCore
    implementation mobileUiDependencies.googleMeterial
    implementation mobileUiDependencies.constraint
    implementation mobileUiDependencies.dagger
    implementation mobileUiDependencies.daggerSupport
    implementation mobileUiDependencies.navGraphFragment
    implementation mobileUiDependencies.navGraphUi
    implementation mobileUiDependencies.navGraphCommon
    implementation mobileUiDependencies.navGraphRuntime
    implementation mobileUiDependencies.glide


    implementation mobileUiDependencies.lifeCycleRuntime
    implementation mobileUiDependencies.lifeCycleExtensions

    implementation mobileUiDependencies.roomRuntime
    implementation mobileUiDependencies.roomRxJava
    kapt mobileUiDependencies.roomCompiler
    kapt mobileUiDependencies.daggerCompiler
    kapt mobileUiDependencies.daggerProcessor
    kapt mobileUiDependencies.glideCompiler


    testImplementation mobileUiTestDependencies.kotlinJUnit

    // Instrumentation test dependencies
//    androidTestImplementation mobileUiTestDependencies.junit
//    androidTestImplementation mobileUiTestDependencies.mockito
//    androidTestImplementation mobileUiTestDependencies.mockitoAndroid
//    androidTestImplementation mobileUiTestDependencies.navGraphTest
//    androidTestImplementation(mobileUiTestDependencies.espressoCore) {
//        exclude group: 'com.android.support', module: 'support-annotations'
//    }
//    androidTestImplementation(mobileUiTestDependencies.androidRunner) {
//        exclude group: 'com.android.support', module: 'support-annotations'
//    }
//    androidTestImplementation(mobileUiTestDependencies.androidRules) {
//        exclude group: 'com.android.support', module: 'support-annotations'
//    }
//    androidTestImplementation(mobileUiTestDependencies.espressoIntents) {
//        exclude group: 'com.android.support', module: 'support-annotations'
//    }
//    androidTestImplementation(mobileUiTestDependencies.espressoContrib) {
//        exclude module: 'appcompat'
//        exclude module: 'appcompat-v7'
//        exclude module: 'support-v4'
//        exclude module: 'support-v13'
//        exclude module: 'support-annotations'
//        exclude module: 'recyclerview-v7'
//        exclude module: 'design'
//    }
//
//    kaptTest mobileUiDependencies.daggerCompiler
//    kaptAndroidTest mobileUiDependencies.daggerCompiler
}
